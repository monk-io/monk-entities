namespace: render

registry_credentials:
  defines: entity
  metadata:
    name: Render Registry Credentials
  schema:
    required: [ "api_key_secret", "auth_token_secret", "workspace_id", "registry", "name", "username" ]
    api_key_secret:
      type: string
    auth_token_secret:
      type: string
    workspace_id:
      type: string
    registry:
      type: string
      enum:
        - GITHUB
        - GITLAB
        - DOCKER
        - GOOGLE_ARTIFACT
        - AWS_ECR
    name:
      type: string
    username:
      type: string
  lifecycle:
    sync: <<< registry-credentials-sync.js
  checks:
    readiness:
      period: 5
      initialDelay: 5
      attempts: 100

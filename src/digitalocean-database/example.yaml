namespace: digitalocean-database-example

# Basic PostgreSQL database cluster
my-postgres-db:
  defines: digitalocean-database/database
  name: my-postgres-cluster
  engine: pg
  version: "16"
  num_nodes: 1
  region: nyc1
  size: db-s-1vcpu-1gb
  tags:
    - environment:production
    - application:my-app

# MySQL database cluster with multiple nodes
my-mysql-cluster:
  defines: digitalocean-database/database
  name: my-mysql-cluster
  engine: mysql
  version: "8.0"
  num_nodes: 3
  region: sfo3
  size: db-s-2vcpu-4gb
  tags:
    - environment:production
    - application:ecommerce
  db_config:
    sql_mode: "STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO"
    default_time_zone: "UTC"

# Valkey cache cluster (redis is mapped to valkey for backwards compatibility)
my-valkey-cache:
  defines: digitalocean-database/database
  name: my-valkey-cache
  engine: valkey
  version: "8"
  num_nodes: 1
  region: fra1
  size: db-s-1vcpu-2gb
  tags:
    - environment:production
    - application:cache
  db_config:
    redis_maxmemory_policy: "allkeys-lru"

# MongoDB cluster
my-mongodb:
  defines: digitalocean-database/database
  name: my-mongodb-cluster3
  engine: mongodb
  version: "7.0"
  num_nodes: 1
  region: lon1
  size: db-s-2vcpu-4gb
  tags:
    - environment:production
    - application:document-store

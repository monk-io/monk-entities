namespace: aws-ec2
vpc:
  defines: entity
  metadata:
    name: VPC
    description: |-
      AWS EC2 VPC entity.
      Creates and manages Amazon VPC (Virtual Private Cloud) for isolated network environments.
      Supports custom CIDR blocks, DNS configuration, and can adopt existing VPCs.

      ## Secrets
      - Reads: none (authenticated via AWS provider)
      - Writes: none

      ## State Fields for Composition
      - `state.vpc_id` - VPC ID for subnet and security group configuration
      - `state.state` - VPC state (available, pending)
      - `state.cidr_block` - VPC CIDR block

      ## Composing with Other Entities
      Works with:
      - `aws-ec2/subnet` - Create subnets within the VPC
      - `aws-ec2/security-group` - Define network access rules
      - `aws-rds/instance` - Place databases in VPC subnets
      - `aws-lambda/function` - Connect Lambda to VPC resources
    version-hash: 3320bf43b59d
  schema:
    region:
      type: string
    vpc_id:
      type: string
    cidr_block:
      type: string
    enable_dns_support:
      type: boolean
    enable_dns_hostnames:
      type: boolean
    tags:
      type: object
      additionalProperties:
        type: string
    required:
      - region
  state-schema:
    existing:
      type: boolean
    vpc_id:
      type: string
      description: VPC ID
    state:
      type: string
      description: 'VPC state (available, pending)'
    cidr_block:
      type: string
      description: VPC CIDR block
  lifecycle:
    sync: <<< vpc-sync.js
  checks:
    readiness:
      period: 5
      initialDelay: 2
      attempts: 10
    liveness:
      period: 300
  requires:
    - aws-ec2/ec2-base

namespace: aws-ec2
subnet:
  defines: entity
  metadata:
    name: Subnet
    description: |-
      AWS EC2 Subnet entity.
      Creates and manages VPC subnets for network segmentation.
      Subnets are IP address ranges within a VPC for resource isolation.

      ## Secrets
      - Reads: none (authenticated via AWS provider)
      - Writes: none

      ## State Fields for Composition
      - `state.subnet_id` - Subnet ID for resource placement
      - `state.cidr_block` - Subnet CIDR block

      ## Composing with Other Entities
      Works with:
      - `aws-ec2/vpc` - The parent VPC
      - `aws-rds/instance` - Place database in private subnets
      - `aws-rds/db-subnet-group` - Group subnets for RDS
    version-hash: d4ccad916e47
  schema:
    region:
      type: string
    vpc_id:
      type: string
    cidr_block:
      type: string
    availability_zone:
      type: string
    map_public_ip_on_launch:
      type: boolean
    tags:
      type: object
      additionalProperties:
        type: string
    required:
      - region
      - vpc_id
      - cidr_block
  state-schema:
    existing:
      type: boolean
    subnet_id:
      type: string
    state:
      type: string
    cidr_block:
      type: string
  lifecycle:
    sync: <<< subnet-sync.js
  checks:
    readiness:
      period: 5
      initialDelay: 2
      attempts: 10
    liveness:
      period: 300
  requires:
    - aws-ec2/base

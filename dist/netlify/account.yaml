namespace: netlify
account:
  defines: entity
  metadata:
    name: Account
    description: |-
      Netlify Account entity.
      Retrieves and manages Netlify account information.
      Lists all team accounts accessible by the current API token.

      ## Secrets
      - Reads: secret name from `secret_ref` property - Netlify API token (defaults to `netlify-api-token`)
      - Writes: none

      ## State Fields for Composition
      - `state.slugs` - Array of team slugs accessible

      ## Composing with Other Entities
      Works with:
      - `netlify/site` - Create sites under team accounts
    version-hash: bda3452f3b74
  schema:
    secret_ref:
      type: string
      minLength: 1
      maxLength: 24
      description: |-
        Secret Reference for Netlify API authentication
        Defaults to "default-netlify-pat" if not provided
  state-schema:
    existing:
      type: boolean
    accounts:
      type: array
      items:
        type: string
  lifecycle:
    sync: <<< account-sync.js
  checks:
    readiness:
      period: 15
      initialDelay: 2
      attempts: 20
  requires:
    - netlify/netlify-base
    - cli

// Generated by MonkEC - targeting Goja runtime
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// input/digitalocean-monitoring/common.ts
var common_exports = {};
__export(common_exports, {
  API_ENDPOINTS: () => API_ENDPOINTS,
  DEFAULTS: () => DEFAULTS,
  ERROR_MESSAGES: () => ERROR_MESSAGES,
  HTTP_STATUS: () => HTTP_STATUS,
  RATE_LIMIT: () => RATE_LIMIT,
  VALIDATION_PATTERNS: () => VALIDATION_PATTERNS,
  generateTimeRange: () => generateTimeRange,
  validateAlertPolicyType: () => validateAlertPolicyType,
  validateAlertPolicyWindow: () => validateAlertPolicyWindow,
  validateComparator: () => validateComparator,
  validateComparisonOperator: () => validateComparisonOperator,
  validateEmail: () => validateEmail,
  validateEmails: () => validateEmails,
  validateMetricType: () => validateMetricType,
  validateSlackUrl: () => validateSlackUrl,
  validateWindow: () => validateWindow
});
module.exports = __toCommonJS(common_exports);
function validateMetricType(type) {
  const validTypes = [
    // === DROPLET METRICS ===
    // CPU and Load
    "v1/insights/droplet/cpu",
    "v1/insights/droplet/load_1",
    "v1/insights/droplet/load_5",
    "v1/insights/droplet/load_15",
    // Memory
    "v1/insights/droplet/memory_utilization_percent",
    // Disk
    "v1/insights/droplet/disk_utilization_percent",
    "v1/insights/droplet/disk_read",
    "v1/insights/droplet/disk_write",
    // Network Bandwidth
    "v1/insights/droplet/public_outbound_bandwidth",
    "v1/insights/droplet/public_inbound_bandwidth",
    "v1/insights/droplet/private_outbound_bandwidth",
    "v1/insights/droplet/private_inbound_bandwidth",
    // === LOAD BALANCER METRICS ===
    "v1/insights/lbaas/avg_cpu_utilization_percent",
    "v1/insights/lbaas/connection_utilization_percent",
    "v1/insights/lbaas/droplet_health",
    "v1/insights/lbaas/tls_connections_per_second_utilization_percent",
    "v1/insights/lbaas/increase_in_http_error_rate_percentage_5xx",
    "v1/insights/lbaas/increase_in_http_error_rate_percentage_4xx",
    "v1/insights/lbaas/increase_in_http_error_rate_count_5xx",
    "v1/insights/lbaas/increase_in_http_error_rate_count_4xx",
    "v1/insights/lbaas/high_http_request_response_time",
    "v1/insights/lbaas/high_http_request_response_time_50p",
    "v1/insights/lbaas/high_http_request_response_time_95p",
    "v1/insights/lbaas/high_http_request_response_time_99p",
    // === DATABASE METRICS ===
    "v1/dbaas/alerts/load_15_alerts",
    "v1/dbaas/alerts/cpu_alerts",
    "v1/dbaas/alerts/memory_utilization_alerts",
    "v1/dbaas/alerts/disk_utilization_alerts",
    // === DROPLET AUTOSCALE METRICS ===
    "v1/droplet/autoscale_alerts/current_instances",
    "v1/droplet/autoscale_alerts/target_instances",
    "v1/droplet/autoscale_alerts/current_cpu_utilization",
    "v1/droplet/autoscale_alerts/target_cpu_utilization",
    "v1/droplet/autoscale_alerts/current_memory_utilization",
    "v1/droplet/autoscale_alerts/target_memory_utilization",
    "v1/droplet/autoscale_alerts/scale_up",
    "v1/droplet/autoscale_alerts/scale_down"
  ];
  if (!validTypes.includes(type)) {
    throw new Error(`Invalid metric type: ${type}. Supported types: ${validTypes.slice(0, 10).join(", ")}... (${validTypes.length} total types)`);
  }
  return type;
}
function validateComparisonOperator(operator) {
  if (operator !== "GreaterThan" && operator !== "LessThan") {
    throw new Error(`Invalid comparison operator: ${operator}. Must be 'GreaterThan' or 'LessThan'`);
  }
  return operator;
}
var validateAlertPolicyType = validateMetricType;
var validateComparator = validateComparisonOperator;
var validateAlertPolicyWindow = validateWindow;
function validateWindow(window) {
  const validWindows = ["5m", "10m", "30m", "1h"];
  if (!validWindows.includes(window)) {
    throw new Error(`Invalid time window: ${window}. Supported windows: ${validWindows.join(", ")}`);
  }
  return window;
}
function validateEmail(email) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}
function validateEmails(emails) {
  for (const email of emails) {
    if (!validateEmail(email)) {
      throw new Error(`Invalid email address: ${email}`);
    }
  }
}
function validateSlackUrl(url) {
  return url.startsWith("https://hooks.slack.com/services/");
}
function generateTimeRange(hours = 1) {
  const endTime = /* @__PURE__ */ new Date();
  const startTime = new Date(endTime.getTime() - hours * 60 * 60 * 1e3);
  return {
    start_time: startTime.toISOString(),
    end_time: endTime.toISOString()
  };
}
var VALIDATION_PATTERNS = {
  EMAIL: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
  SLACK_WEBHOOK: /^https:\/\/hooks\.slack\.com\/services\//,
  DROPLET_ID: /^\d+$/,
  UUID: /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i
};
var DEFAULTS = {
  TIME_WINDOW: "1h",
  METRICS_HOURS: 1,
  MAX_RETRIES: 3,
  RETRY_DELAY: 1e3
};
var ERROR_MESSAGES = {
  INVALID_METRIC_TYPE: "Invalid metric type provided",
  INVALID_COMPARISON: "Invalid comparison operator - must be GreaterThan or LessThan",
  INVALID_WINDOW: "Invalid time window - must be 5m, 10m, 30m, or 1h",
  INVALID_EMAIL: "Invalid email address format",
  INVALID_SLACK_URL: "Invalid Slack webhook URL format",
  MISSING_DROPLET_ID: "Droplet ID is required",
  MISSING_POLICY_UUID: "Alert policy UUID is required",
  API_ERROR: "DigitalOcean API request failed",
  NETWORK_ERROR: "Network request failed",
  TIMEOUT_ERROR: "Request timeout"
};
var API_ENDPOINTS = {
  ALERTS: "/monitoring/alerts",
  SINKS: "/monitoring/sinks",
  ACCOUNT: "/account",
  DROPLETS: "/droplets",
  METRICS_DROPLET: "/monitoring/metrics/droplet",
  METRICS_VOLUMES: "/monitoring/metrics/volumes",
  METRICS_APPS: "/monitoring/metrics/apps",
  METRICS_LOAD_BALANCER: "/monitoring/metrics/load_balancer",
  METRICS_DATABASES: "/monitoring/metrics/databases"
};
var HTTP_STATUS = {
  OK: 200,
  CREATED: 201,
  NO_CONTENT: 204,
  BAD_REQUEST: 400,
  UNAUTHORIZED: 401,
  FORBIDDEN: 403,
  NOT_FOUND: 404,
  CONFLICT: 409,
  RATE_LIMITED: 429,
  INTERNAL_ERROR: 500,
  SERVICE_UNAVAILABLE: 503
};
var RATE_LIMIT = {
  MAX_REQUESTS_PER_SECOND: 10,
  RETRY_AFTER_SECONDS: 60,
  BACKOFF_MULTIPLIER: 2
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  API_ENDPOINTS,
  DEFAULTS,
  ERROR_MESSAGES,
  HTTP_STATUS,
  RATE_LIMIT,
  VALIDATION_PATTERNS,
  generateTimeRange,
  validateAlertPolicyType,
  validateAlertPolicyWindow,
  validateComparator,
  validateComparisonOperator,
  validateEmail,
  validateEmails,
  validateMetricType,
  validateSlackUrl,
  validateWindow
});

namespace: digitalocean-domains
domain:
  defines: entity
  metadata:
    name: Domain
    description: |-
      DigitalOcean Domain entity.
      Creates and manages domains in DigitalOcean DNS.
      Domains are top-level DNS zones for managing DNS records.

      ## Secrets
      - Reads: none (authenticated via DigitalOcean provider)
      - Writes: none

      ## State Fields for Composition
      - `state.name` - Domain name (e.g., example.com)
      - `state.ttl` - Default TTL for DNS records
      - `state.zone_file` - Zone file content

      ## Composing with Other Entities
      Works with:
      - `digitalocean/dns-record` - Create DNS records in this domain
    version-hash: 4065e6f21fd4
  schema:
    name:
      type: string
      description: 'Domain name (e.g., example.com)'
    ip_address:
      type: string
      description: IP address for the domain's A record (optional)
    ttl:
      type: number
      description: 'TTL for DNS records in seconds (default: 1800)'
    required:
      - name
  state-schema:
    existing:
      type: boolean
    name:
      type: string
      description: Domain name
    ttl:
      type: number
      description: Domain TTL
    zone_file:
      type: string
      description: Zone file content
  lifecycle:
    sync: <<< domain-sync.js
    info: ''
    records: ''
    add-a-record: ''
    add-cname-record: ''
    list-all-domains: ''
  checks:
    readiness:
      period: 5
      initialDelay: 1
      attempts: 10
  requires:
    - digitalocean-domains/common
    - monkec/base
    - monkec/base
    - cli

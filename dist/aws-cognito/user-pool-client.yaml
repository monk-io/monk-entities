namespace: aws-cognito
user-pool-client:
  defines: entity
  metadata:
    name: UserPoolClient
  schema:
    region:
      type: string
      description: AWS region where the Cognito resources will be managed
    user_pool_id:
      type: string
    client_name:
      type: string
    generate_secret:
      type: boolean
    refresh_token_validity:
      type: number
    access_token_validity:
      type: number
    id_token_validity:
      type: number
    token_validity_units:
      type: object
      properties:
        AccessToken:
          type: string
          enum:
            - seconds
            - minutes
            - hours
            - days
        IdToken:
          type: string
          enum:
            - seconds
            - minutes
            - hours
            - days
        RefreshToken:
          type: string
          enum:
            - seconds
            - minutes
            - hours
            - days
      additionalProperties: false
    explicit_auth_flows:
      type: array
      items:
        type: string
    read_attributes:
      type: array
      items:
        type: string
    write_attributes:
      type: array
      items:
        type: string
    supported_identity_providers:
      type: array
      items:
        type: string
    callback_urls:
      type: array
      items:
        type: string
    logout_urls:
      type: array
      items:
        type: string
    default_redirect_uri:
      type: string
    allowed_oauth_flows:
      type: array
      items:
        type: string
    allowed_oauth_scopes:
      type: array
      items:
        type: string
    allowed_oauth_flows_user_pool_client:
      type: boolean
    analytics_configuration:
      type: object
      properties:
        ApplicationId:
          type: string
        ApplicationArn:
          type: string
        RoleArn:
          type: string
        ExternalId:
          type: string
        UserDataShared:
          type: boolean
      additionalProperties: false
    prevent_user_existence_errors:
      type: string
      enum:
        - LEGACY
        - ENABLED
    enable_token_revocation:
      type: boolean
    enable_propagate_additional_user_context_data:
      type: boolean
    auth_session_validity:
      type: number
    required:
      - region
      - user_pool_id
      - client_name
  lifecycle:
    sync: <<< user-pool-client-sync.js
    get-client-info: ''
    get-oauth-config: ''
    test-auth-config: ''
  checks:
    readiness:
      period: 5
      initialDelay: 2
      attempts: 10
  requires:
    - aws-cognito/cognito-base
    - monkec/base
    - cli
